<vex-secondary-toolbar>
    <globits-breadcrumbs [crumbs]="breadcrumbs"></globits-breadcrumbs>

    <button class="ml-2" color="primary" mat-icon-button type="button">
      <mat-icon svgIcon="mat:more_vert"></mat-icon>
    </button>
</vex-secondary-toolbar>
<form (ngSubmit)="reloadTable()" [formGroup]="form!">
    <div class="pb-4 p-gutter fullwidth border-b-2">
      <div class="card pb-4">
        <h2 class="title px-3 py-4 rounded-t text-white bg-primary-black">Danh sách đơn vị nộp hồ sơ</h2>
      <globits-grid [container]="true" [className]="'card-form-body'">
          <globits-grid [xs]="12" [md]="3" [lg]="3">
              <select-component [options]="listProvince" [controlName]="'provinceId'"
              [bindLabel]="'name'" [bindValue]="'id'" [control]="f?.provinceId" (onChange)="getProvinceAdminUnit()"
              class="flex-auto" [label]="'Tỉnh/Thành phố'"></select-component>
          </globits-grid>
          <globits-grid [xs]="12" [md]="3" [lg]="3">
              <select-component [options]="listDistrict" [controlName]="'districtId'"
              [bindLabel]="'name'" [bindValue]="'id'" [control]="f?.districtId"
              class="flex-auto" [label]="'Quận/Huyện'"></select-component>
          </globits-grid>
          <globits-grid [xs]="12" [md]="3" [lg]="3">
              <input-component [controlName]="'code'" [control]="f?.code" [label]="'Mã CSKCB'">
              </input-component>
          </globits-grid>
          <globits-grid [xs]="12" [md]="3" [lg]="3">
              <input-component [controlName]="'name'" [control]="f?.name" [label]="'Tên CSKCB'">
              </input-component>
          </globits-grid>
        </globits-grid>
        <div class="flex items-center justify-center">
            <button-component type="submit">
              <icon-search></icon-search>
              Tìm kiếm
            </button-component>
        </div>
        </div>
    </div>
</form>

<div class="pb-4 p-gutter fullwidth border-b-2">
    <div class="card pb-4">
        <div class="d-flex align-items-center justify-content-between">
            <button class="button" mat-button>
                <icon-print></icon-print>
                <span class="ml-1">In danh sách đơn vị</span>
            </button>
            <button class="button" (click)="handleCreate()" style="background-color: #197782; color: #fff; width: 16%;" mat-raised-button>
                <mat-icon>add</mat-icon>
                <span class="ml-1">Thêm mới</span>
            </button>
        </div>
        <table-component [rows]="listOfOrg" [childTemplate]="button" (limitChange)="onLimitChange($event)" [columns]="columns" [totalElements]="totalElements" (change)="setPage($event)">
        </table-component>
    </div>
</div>

<ng-template #button let-row>
    <button><icon-eyes></icon-eyes></button>
    <button class="ml-2" (click)="handleEdit(row)">
        <icon-edit></icon-edit>
    </button>
    <button (click)="onDelete(row.id)">
        <icon-trash></icon-trash>
    </button>
</ng-template>
