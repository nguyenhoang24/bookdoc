<vex-secondary-toolbar>
  <globits-breadcrumbs [crumbs]="breadcrumbs"></globits-breadcrumbs>

  <button class="ml-2" color="primary" mat-icon-button type="button">
    <mat-icon svgIcon="mat:more_vert"></mat-icon>
  </button>
</vex-secondary-toolbar>
<form (ngSubmit)="onSubmit()" [formGroup]="form!">
  <div class="pb-4 p-gutter fullwidth border-b-2">
    <div class="card pb-4">
      <h2 class="title px-3 py-4 rounded-t text-white bg-primary-black">Danh sách file đã nộp</h2>
      <globits-grid [container]="true" [className]="'card-form-body'">
        <globits-grid [xs]="12" [md]="3" [lg]="3">
          <select-component class="flex-auto" [label]="'Mã CSKCB'"></select-component>
        </globits-grid>
        <globits-grid [xs]="12" [md]="3" [lg]="3">
          <select-component class="flex-auto" [label]="'Loại file'"></select-component>
        </globits-grid>
        <globits-grid [xs]="12" [md]="3" [lg]="3">
          <date-input [label]="'Từ ngày:'">
          </date-input>
        </globits-grid>
        <globits-grid [xs]="12" [md]="3" [lg]="3">
          <date-input [label]="'Đến ngày:'">
          </date-input>
        </globits-grid>
      </globits-grid>
      <div class="flex items-center justify-center">
        <button-component type="submit">
          <icon-search></icon-search>
          Tìm kiếm
        </button-component>
      </div>
    </div>
  </div>
</form>

<div class="pb-4 p-gutter fullwidth border-b-2">
  <div class="card pb-4">
    <div class="d-flex align-items-center justify-content-between">
      <button class="button" mat-button>
        <icon-print></icon-print>
        <span class="ml-1">In danh sách bệnh nhân</span>
      </button>
      <div class="justify-content-end">
        <button class="button" style="background-color: #197782; color: #fff; width: 16%;" (click)="backClicked()"
          mat-raised-button>
          <icon-back></icon-back>
          <span class="ml-1">Quay lại</span>
        </button>
      </div>

    </div>
    <table-component [rows]="listOfFiles" [childTemplate]="button" (limitChange)="onLimitChange($event)"
      [columns]="columns" [totalElements]="totalElements" (change)="setPage($event)">
    </table-component>
  </div>
</div>

<ng-template #button let-row>
  <button (click)="redirectPatientInfo(row)">
    <icon-eyes></icon-eyes>
  </button>
  <button class="ml-2" (click)="onDownload(row?.insuranceAssessmentFile?.id)">
    <icon-download></icon-download>
  </button>
</ng-template>
